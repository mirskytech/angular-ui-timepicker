/*!
 * angular-ui-timepicker
 * https://github.com/mirskytech/angular-ui-timepicker#readme
 * Version: 0.1.0 - 2015-12-01T18:02:00.265Z
 * License: MIT
 */
!function(){"use strict";var t=function(t,e,a){var n,i,r,o,s=$(e),l=!1,d=!1,c={widgetPositioning:{horizontal:"auto",vertical:"auto"},widgetParent:null,ignoreReadonly:!1,keepOpen:!1,focusOnShow:!0,inline:!1},p=null,m=null,u=200,h=u,f=u,g={top:10,right:10,bottom:10,left:10},v=10,w=1,x=720,M=1,b=!1,k=function(t,e,a){function s(t){return"AM"===moment(t).format("A")}function l(){n=i=f-g.right-g.left-g.top-g.bottom,r=o=n/2,v=.2*n,m.outerRadius(n/2),m.innerRadius(n/2*.85)}function d(e,a,i,r){var o=Math.min((M-w)/(x-w),1),s=Math.min(360*o,360)*Math.PI/180;m.endAngle(s),e.attr("d",m);var l=360*M/x,d=n/2-5,c=d*Math.cos((l-90)*Math.PI/180),p=d*Math.sin((l-90)*Math.PI/180);a.attr("cx",c).attr("cy",p);var u=moment(t.datetime).hours(),h=u>=12?u-12:u,f=moment(t.datetime).minutes(),g=""+h+":";10>f&&(g+="0"),g+=f,i.text(g),r.text(moment(t.datetime).format("A"))}var c={increments:t.increments||1};p=d3.select(e),m=d3.svg.arc().startAngle(0*(Math.PI/180)).endAngle(360*(Math.PI/180)),p.each(function(e){l();var a=d3.select(this).selectAll("svg").data([e]),p=a.enter().append("svg").attr("class","x1-timepicker-svg").append("g").attr("transform","translate("+g.left+","+g.top+")");a.attr("width",u).attr("height",h);var f=p.append("g").attr("class","x1-timepicker-component"),w=(f.append("circle").attr("class","x1-timepicker-inner").attr("transform","translate("+r+","+o+")").attr("cx",0).attr("cy",0).attr("r",n/2),f.append("path").attr("transform","translate("+r+","+o+")").attr("d",m),p.append("g").attr("class","x1-timepicker-arcs")),k=w.append("path").attr("class","arc").attr("transform","translate("+r+","+o+")").attr("d",m),y=p.append("g").attr("class","x1-timepicker-labels"),P=(y.append("text").attr("class","title").attr("x",r).attr("y",n/4.2+v/3).attr("width",n).text("Time").style("font-size",.4*v+"px"),y.append("text").attr("class","time").attr("x",r).attr("y",o+v/3).attr("width",n).style("font-size",1.4*v+"px")),$=y.append("text").attr("class","ampm").attr("cursor","pointer").attr("x",r).attr("y",n/1.4+v/3).attr("width",n).style("font-size",.6*v+"px").on("click",function(){var e=s(t.datetime),a=e?12:-12;b=!e,t.datetime=moment(t.datetime).add(a,"hour").toDate(),d3.select(this).text(moment(t.datetime).format("A")),t.$apply()}),C=d3.behavior.drag().on("drag",function(){var e=d3.event.x,a=d3.event.y,r=(Math.PI*n,0),o=0,s=e-n/2,l=i/2-a,p=(l-o)/(s-r),m=Math.abs(Math.atan(p)/(Math.PI/180)),u=0;s>0&&l>=0?u=90-m:s>=0&&0>l?u=90+m:0>s&&0>=l?u=270-m:0>=s&&l>0&&(u=270+m),M=x*(u/360);var h=Math.floor(M/60);h=b?h:h+12;var f=Math.floor(M%60/c.increments)*c.increments;t.datetime=moment(t.datetime).set("hour",h).set("minute",f).set("second",0).toDate(),t.$apply(function(){d(k,A,P,$)})}),A=p.append("g").append("circle").attr("class","x1-timepicker-handler").attr("cursor","pointer").attr("transform","translate("+r+","+o+")").attr("cx",0).attr("cy",0).attr("r",10).attr("fill","#FFFFFF").call(C),z=function(t){var e=moment(t).hours(),a=e>=12?e-12:e,n=moment(t).minutes();M=60*a+n,d(k,A,P,$)};z(t.datetime),b=s(t.datetime),t.$watch("datetime",function(t,e){z(t)})})},y=function(){var e=$("<div>").addClass("bootstrap-datetimepicker-widget dropdown-menu"),a=document.createElement("div");return k(t,a),e.append(a)},P=function(){var t,a=(l||e).position(),n=(l||e).offset(),i=c.widgetPositioning.vertical,r=c.widgetPositioning.horizontal;if(c.widgetParent)t=c.widgetParent.append(d);else if(e.is("input"))t=e.after(d).parent();else{if(c.inline)return void(t=e.append(d));t=e,e.children().first().after(d)}if("auto"===i&&(i=n.top+1.5*d.height()>=$(window).height()+$(window).scrollTop()&&d.height()+e.outerHeight()<n.top?"top":"bottom"),"auto"===r&&(r=t.width()<n.left+d.outerWidth()/2&&n.left+d.outerWidth()>$(window).width()?"right":"left"),"top"===i?d.addClass("top").removeClass("bottom"):d.addClass("bottom").removeClass("top"),"right"===r?d.addClass("pull-right"):d.removeClass("pull-right"),"relative"!==t.css("position")&&(t=t.parents().filter(function(){return"relative"===$(this).css("position")}).first()),0===t.length)throw new Error("datetimepicker component should be placed within a relative positioned container");d.css({top:"top"===i?"auto":a.top+e.outerHeight(),bottom:"top"===i?a.top+e.outerHeight():"auto",left:"left"===r?t===e?0:a.left:"auto",right:"left"===r?"auto":t.outerWidth()-e.outerWidth()-(t===e?0:a.left)})},C=function(){var t=!1;return d?(d.find(".collapse").each(function(){var e=$(this).data("collapse");return e&&e.transitioning?(t=!0,!1):!0}),t?!1:(l&&l.hasClass("btn")&&l.toggleClass("active"),d.hide(),$(window).off("resize",P),d.off("click","[data-action]"),d.off("mousedown",!1),d.remove(),d=!1,s.blur(),!0)):!1},A=function(){return s.prop("disabled")||!c.ignoreReadonly&&s.prop("readonly")||d?!1:(d=y(t,e),$(window).on("resize",P),d.on("mousedown",!1),l&&l.hasClass("btn")&&l.toggleClass("active"),d.show(),P(),c.focusOnShow&&!s.is(":focus")&&s.focus(),!0)},z=function(){s.on({blur:C,focus:A}),e.is("input")?s.on({focus:A}):l&&(l.on("click",toggle),l.on("mousedown",!1))};z()};angular.module("ui.timepicker",[]).directive("uiTimepicker",["$compile",function(e){return{replace:!1,scope:{datetime:"=ngModel",increments:"="},template:'<div class="mirsky"></div>',link:function(a,n,i){t(a,n,e)}}}])}();